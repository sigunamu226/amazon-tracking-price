{% extends 'templates/base.html' %} 

{% block title %}価格追跡アプリ{% endblock %}

{% block style %}
<link
  rel="stylesheet"
  href="/templates/static/css/bootstrap/bootstrap.min.css"
/>
<link rel="stylesheet" href="/templates/static/css/header.css" />
<link rel="stylesheet" href="/templates/static/css/items.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
{% endblock %}

{% block content %}

{% include 'templates/layouts/header.html' %}

<div class="main-container pt-5">
  <div class="row title-row">
    <div class="col-6">
      <h1>商品一覧</h1>
    </div>
    <div class="col-6 text-end">
      <button type="button" class="btn btn-primary add-button">
        <a href={% url 'items_regist' %}>
          新規登録
        </a>
      </button>
    </div>
  </div>

  <hr class="mt-4" />
  <div class="row table-section">
    <table class="table table-hover">
      <thead>
        <tr class="item-table-row">
          <th scope="col">商品名</th>
          <th scope="col">画像</th>
          <th scope="col">現在の価格</th>
          <th scope="col">希望価格</th>
          <th scope="col">変動値</th>
          <th scope="col">URL</th>
          <th scope="col" style="width: 5%">操作</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr class="item-table-row">
          <th scope="row">{{item.name}}</th>
          <td><img class="item-image" src="/{{item.image}}"/></td>
          <td>{{item.now_price}}円</td>
          <td>{{item.hope_price}}円</td>
          <td>{{item.fluctuating_value}}円</td>
          <td><a class="item-url-link" href="{{item.url}}">商品ページへ <i class="bi bi-box-arrow-up-right"></i></a></td>
          <td>
            <form action={% url 'items_delete' %} method="POST">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-danger" name="delete_item_id" value="{{item.id}}">削除</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{%endblock%} 

{% block script %}
<script src="/templates/static/js/bootstrap.bundle.min.js"></script>
{% endblock %}
